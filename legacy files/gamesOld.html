<html>

<head>
<script src="../libs/jquery.js"></script>
<style type = "text/css">
    BODY { font-family: "Trebuchet MS", Helvetica, sans-serif; background-image: url("../imgs/background.jpg"); background-repeat: no-repeat; background-attachment: fixed;  }
    TABLE { background-image: url("http://cdn.steamcommunity.com/public/images/profile/profile_header_bg_texture.jpg"); background-color: #141414; }
    TD { text-align: left; color: #737271; }
    .heading { padding: 5px; font-weight: bold; color: #5491cf; cursor: pointer; }
    .centerHeading { padding: 5px; font-weight: bold; color: #5491cf; text-align: center; cursor: pointer; }
    .game { padding: 5px; background-color: #222223; border: 1px solid #212121; box-shadow: 1px 1px 0px #343944; border-radius: 3px; }
    .check { background-color: green; color: #ffffff; font-weight: bold; text-align: center; }
    .no { background-color: red; color: #ffffff; font-weight: bold; text-align: center; }
    .notes { padding: 5px; text-align: center; background-color: #222223; border: 1px solid #212121; box-shadow: 1px 1px 0px #343944; border-radius: 3px; }
</style>
<script type="text/javascript">
$(document).ready(function() {
    var games = [
        {
            "game": "Banished",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "Batman: Arkham City GOTY",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "L.A. Noire",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "Red Orchestra 2",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "Rust",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "South Park: The Stick of Truth",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "Team Fortress 2",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },,
        {
            "game": "Thief",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "The Elder Scrolls V: Skyrim",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "The Wicher 2: Enhanced Edition",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "Tom Clancy's Splinter Cell Blacklist",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "Counter-Strike: Global Offensive",
            "backedUp": "true",
            "date": "03/24/2014",
            "notes": ""
        },
        {
            "game": "Audiosurf",
            "backedUp": "false",
            "date": "",
            "notes": ""
        },
        {
            "game": "Planetary Annihilation",
            "backedUp": "false",
            "date": "",
            "notes": ""
        },
        {
            "game": "Counter-Strike: Source",
            "backedUp": "false",
            "date": "",
            "notes": ""
        },
        {
            "game": "Alpha Protocol",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Assassin's Creed: Brotherhood",
            "backedUp": "true",
            "date": "02/15/2012",
            "notes": ""
        },
        {
            "game": "Assassin's Creed: Revelations",
            "backedUp": "true",
            "date": "02/25/2012",
            "notes": ""
        },
        {
            "game": "Batman: Arkham Asylum GOTY",
            "backedUp": "true",
            "date": "02/15/2012",
            "notes": ""
        },
        {
            "game": "Battlefield: Bad Company 2",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Bioshock 2",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Blur",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Borderlands",
            "backedUp": "true",
            "date": "02/25/2012",
            "notes": ""
        },
        {
            "game": "Brink",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Bulletstorm",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Call of Duty: Modern Warfare 2 - Multiplayer",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Call of Duty: Modern Warfare 3 - Multiplayer",
            "backedUp": "true",
            "date": "02/24/2012",
            "notes": ""
        },
        {
            "game": "Call of Duty: Modern Warfare 2 - Singleplayer",
            "backedUp": "false",
            "date": "",
            "notes": ""
        },
        {
            "game": "Call of Duty: Modern Warfare 3 - Singleplayer",
            "backedUp": "false",
            "date": "",
            "notes": ""
        },
        {
            "game": "Call of Juarez: Bound in Blood",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Command and Conquer 3: Tiberium Wars",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Command and Conquer 3: Kane's Wrath",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Command and Conquer: Red Alert 3",
            "backedUp": "true",
            "date": "04/08/2012",
            "notes": ""
        },
        {
            "game": "Command and Conquer: Red Alert 3 Uprising",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Darksiders",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Dead Island",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Dead Rising 2",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Dirt 3",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Deus Ex: Human Revolution Director's Cut",
            "backedUp": "false",
            "date": "",
            "notes": ""
        },
        {
            "game": "Fable III",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Fallen Earth",
            "backedUp": "true",
            "date": "06/24/2012",
            "notes": ""
        },
        {
            "game": "Fallout 3",
            "backedUp": "true",
            "date": "06/24/2012",
            "notes": ""
        },
        {
            "game": "Fallout: New Vegas",
            "backedUp": "true",
            "date": "04/08/2012",
            "notes": ""
        },
        {
            "game": "Far Cry 2",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Grand Theft Auto IV",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Grand Theft AUto IV: Episodes from Liberty City",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Killing Floor",
            "backedUp": "true",
            "date": "04/08/2012",
            "notes": ""
        },
        {
            "game": "Left 4 Dead",
            "backedUp": "true",
            "date": "07/22/2012",
            "notes": ""
        },
        {
            "game": "Left 4 Dead 2",
            "backedUp": "true",
            "date": "03/15/2012",
            "notes": ""
        },
        {
            "game": "Mafia II",
            "backedUp": "true",
            "date": "02/24/2012",
            "notes": ""
        },
        {
            "game": "Medal of Honor SP",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Medal of Honor MP",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Mount and Blade: With FIre and Sword",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Mount and Blade: Warband",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Overlord",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Overlord II",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Payday: The Heist",
            "backedUp": "true",
            "date": "02/25/2012",
            "notes": ""
        },
        {
            "game": "Payday 2",
            "backedUp": "true",
            "date": "05/24/2014",
            "notes": ""
        },
        {
            "game": "Portal",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Portal 2",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "RAGE",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Red Orchestra Ostfront 41-45",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Saints Row The Third",
            "backedUp": "true",
            "date": "02/24/2012",
            "notes": ""
        },
        {
            "game": "Sid Meier's Civilization V",
            "backedUp": "true",
            "date": "02/24/2012",
            "notes": "Needs new backup"
        },
        {
            "game": "Star Wars - Jedi Knight II Jedi Outcast",
            "backedUp": "true",
            "date": "04/08/2012",
            "notes": ""
        },
        {
            "game": "Star Wars Battlefront II",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Star Wars: Knights of the Old Republic",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Star Wars: The Force Unleashed II",
            "backedUp": "true",
            "date": "07/22/2012",
            "notes": ""
        },
        {
            "game": "Stronghold 3",
            "backedUp": "true",
            "date": "04/08/2012",
            "notes": ""
        },
        {
            "game": "Supreme COmmander 2",
            "backedUp": "true",
            "date": "02/24/2012",
            "notes": ""
        },
        {
            "game": "Team Fortress Classic",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "The Elder Scrolls IV: Oblivion",
            "backedUp": "true",
            "date": "04/08/2012",
            "notes": ""
        },
        {
            "game": "The Witcher: Enhanced Edition",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Tom Clancy's Rainbow Six Vegas 2",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Tom Clancy's Splinter Cell Conviction",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Total War: Shogun 2",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Transformers: War for Cybertron",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Tropico 3: Abolute Power",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Tropico 3",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Unreal Tournament",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Unreal Tournament 3",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Unreal Tournament 2004",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Warhammer 40,000: Dawn of War II",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Warhammer 40,000: Dawn of War II - Chaos Rising",
            "backedUp": "true",
            "date": "02/16/2012",
            "notes": ""
        },
        {
            "game": "Watch Dogs",
            "backedUp": "true",
            "date": "06/03/2014",
            "notes": ""
        },
        {
            "game": "Far Cry 3",
            "backedUp": "false",
            "date": "",
            "notes": ""
        }
    ];

    //name
    var cmp = function(x, y){
        return x > y ? 1 : x < y ? -1 : 0;
    };

    //date
    var cmp2 = function(x, y) {
        if ((x != undefined && x != "") && (y == ""))
            return -1;
        else if ((y != undefined && y != "") && (x == ""))
            return 1;

        else if	((x != undefined && x != "") && (y != undefined && y != "")) {
            var xArr = x.split("/");
            var yArr = y.split("/");

            if (xArr[2] > yArr[2])
                return 1;
            else if (yArr[2] > xArr[2])
                return -1;
            else {
                if (xArr[0] > yArr[0])
                    return 1;
                else if (yArr[0] > xArr[0])
                    return -1;
                else {
                    if (xArr[1] > yArr[1])
                        return 1;
                    else if (yArr[1] > xArr[1])
                        return -1;
                    else
                        return 0;
                }
            }
        }

        return 0;
    }

    function sortResults(val1, val2, order) {
        games = games.sort(function(a, b){
            if (order == "asc") {
                if (val1 == "game") {
                    //note the minus before -cmp, for descending order
                    return cmp(
                            [cmp(a[val1], b[val1]), -cmp2(a[val2], b[val2])],
                            [cmp(b[val1], a[val1]), -cmp2(b[val2], a[val2])]
                    );
                }
                else if (val1 == "date") {
                    return cmp(
                            [cmp2(a[val1], b[val1]), cmp(a[val2], b[val2])],
                            [cmp2(b[val1], a[val1]), cmp(b[val2], a[val2])]
                    );
                }
                else {
                    return cmp(
                            [cmp(a[val1], b[val1]), cmp2(a[val2], b[val2])],
                            [cmp(b[val1], a[val1]), cmp2(b[val2], a[val2])]
                    );
                }
            }
            else if (order == "desc") {
                if (val1 == "game") {
                    //note the minus before -cmp, for descending order
                    return cmp(
                            [-cmp(a[val1], b[val1]), -cmp2(a[val2], b[val2])],
                            [-cmp(b[val1], a[val1]), -cmp2(b[val2], a[val2])]
                    );
                }
                else if (val1 == "date") {
                    return cmp(
                            [-cmp2(a[val1], b[val1]), cmp(a[val2], b[val2])],
                            [-cmp2(b[val1], a[val1]), cmp(b[val2], a[val2])]
                    );
                }
                else {
                    return cmp(
                            [-cmp(a[val1], b[val1]), -cmp2(a[val2], b[val2])],
                            [-cmp(b[val1], a[val1]), -cmp2(b[val2], a[val2])]
                    );
                }
            }
        });
        //console.log(games);
    }




    var regenerateDOM = function() {
        buildDOM();
    }

    var gameAscBoolean = true;
    var statusAscBoolean = true;
    var dateAscBoolean = true;

    var setOtherAscBooleans = function(status) {
        console.log(status);
        if(status == "gameAscBoolean") {
            statusAscBoolean = true;
            dateAscBoolean = true;
            gameAscBoolean = !gameAscBoolean;
        }
        else if(status == "statusAscBoolean") {
            gameAscBoolean = true;
            dateAscBoolean = true;
            statusAscBoolean = !statusAscBoolean;
        }
        else {
            gameAscBoolean = true;
            statusAscBoolean = true;
            dateAscBoolean = !dateAscBoolean;
        }
        console.log(statusAscBoolean);
    };

    var buildDOM = function() {
        $("#gameSort").unbind("click");
        $("#statusSort").unbind("click");
        $("#dateSort").unbind("click");

        $("#gamesDisplay").empty();
        $("#gamesDisplay").append("<tr>" +
                "<td class = 'heading' id='gameSort' width='40%'>Game</td>" +
                "<td class = 'centerHeading' id='statusSort' width='10%'>Status</td>" +
                "<td class = 'centerHeading' id='dateSort' width='25%'>Date</td>" +
                "<td class = 'centerHeading' width='25%'>Notes</td></tr>");

        var game;
        var html;
        for(var y in games) {
            game = games[y];
            html = "<tr>" +
                    "<td class = 'game'>" + game.game + "</td>";
            if (game.backedUp == "true") {
                html += "<td class = 'check'>&#x2713;</td>";
            }
            else {
                html += "<td class = 'no'>X</td>";
            }

            html += "<td class = 'notes'>" + game.date + "</td>" +
                    "<td class = 'notes'>" + game.notes + "</td></tr>";

            $("#gamesDisplay").append(html);
        }

        $("#gameSort").bind("click", function() {
            if (gameAscBoolean === true)
                sortResults("game", "date", "asc");
            else
                sortResults("game", "date", "desc");

            setOtherAscBooleans("gameAscBoolean");
            regenerateDOM();
            $(this).addClass("toggledOn");
        });

        $("#statusSort").bind("click", function() {
            if (statusAscBoolean === true)
                sortResults("status", "date", "asc");
            else
                sortResults("status", "date", "desc");

            setOtherAscBooleans("statusAscBoolean");
            regenerateDOM();
        });

        $("#dateSort").bind("click", function() {
            if (dateAscBoolean === true)
                sortResults("date", "game", "asc");
            else
                sortResults("date", "game", "desc");

            setOtherAscBooleans("dateAscBoolean");
            regenerateDOM();
        });
    };

    //sortResults("game", "date");
    sortResults("game", "date", "asc");
    buildDOM();

});
</script>
</head>

<body>

<center>
    <!-- TABLE { background-image: url("http://cdn.steamcommunity.com/public/images/profile/showcase_bg.png"); background-repeat: no-repeat; background-color: #141414; } -->
    <table width="50%" id="gamesDisplay">

    </table>
</center>

</body>

</html>